<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="https://lp.azuton.com/wp-content/uploads/2024/07/cropped-Favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Azuton - PABX Virtual com IA de voz. Atendimento imediato, humano e sem fila."
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>Azuton - PABX Virtual com IA de Voz</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    
    <!-- Vapi SDK - Formato oficial da documentação -->
    <script>
      var vapiInstance = null;
      const assistant = "3a43dfa8-674a-4976-964b-c6729ecccad3";
      const apiKey = "5bf919cf-4f0b-4219-ab02-74722fbc0eb5";
      const buttonConfig = {
        position: "bottom-right",
        size: "small",
        theme: "light",
        offset: "20px"
      };

      window.vapiReady = false;

      (function (d, t) {
        var g = document.createElement(t),
          s = d.getElementsByTagName(t)[0];
        g.src = "https://cdn.jsdelivr.net/gh/VapiAI/html-script-tag@latest/dist/assets/index.js";
        g.defer = true;
        g.async = true;
        s.parentNode.insertBefore(g, s);

        g.onload = function () {
          console.log('Vapi SDK carregado');
          vapiInstance = window.vapiSDK.run({
            apiKey: apiKey, // mandatory
            assistant: assistant, // mandatory
            config: buttonConfig, // optional
          });
          console.log('Vapi SDK disponível:', window.vapiSDK);
          console.log('Vapi Instance criada:', vapiInstance);
          
          // Expõe a instância globalmente
          window.vapiInstance = vapiInstance;
          window.vapiReady = true;
          window.dispatchEvent(new Event('vapiReady'));
          
          // Esconde o botão circular do Vapi
          setTimeout(() => {
            const vapiButton = document.querySelector('button[style*="position: fixed"]');
            if (vapiButton) {
              vapiButton.style.display = 'none';
              console.log('Botão circular do Vapi escondido');
            }
          }, 1000);
        };
      })(document, "script");
    </script>
  </body>
</html>
